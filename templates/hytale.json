{
  "id": "hytale",
  "name": "Hytale",
  "description": "Set out on an adventure built for both creation and play. Hytale blends the freedom of a sandbox with the momentum of an RPG: explore a procedurally generated world full of dungeons, secrets, and a variety of creatures, then shape it block by block.",
  "author": "Aero Maintainers",
  "version": "latest",
  "image": "ghcr.io/pterodactyl/games:hytale",
  "installImage": "ghcr.io/pterodactyl/installers:alpine",
  "startup": "sh -c 'cd /data && if [ -f \"updater/staging/Server/HytaleServer.jar\" ]; then echo \"[Launcher] Applying staged update...\"; cp -f updater/staging/Server/HytaleServer.jar Server/; [ -f \"updater/staging/Server/HytaleServer.aot\" ] && cp -f updater/staging/Server/HytaleServer.aot Server/; [ -d \"updater/staging/Server/Licenses\" ] && rm -rf Server/Licenses && cp -r updater/staging/Server/Licenses Server/; [ -f \"updater/staging/Assets.zip\" ] && cp -f updater/staging/Assets.zip ./; [ -f \"updater/staging/start.sh\" ] && cp -f updater/staging/start.sh ./; [ -f \"updater/staging/start.bat\" ] && cp -f updater/staging/start.bat ./; rm -rf updater/staging; fi; cd Server; JVM_ARGS=\"\"; if [ \"{{USE_AOT_CACHE}}\" = \"true\" ] || [ \"{{USE_AOT_CACHE}}\" = \"1\" ]; then if [ -f \"HytaleServer.aot\" ]; then JVM_ARGS=\"-XX:AOTCache=HytaleServer.aot\"; fi; fi; java $JVM_ARGS -XX:MaxMetaspaceSize=512M -XX:+UnlockExperimentalVMOptions -XX:+UseShenandoahGC -XX:ShenandoahGCHeuristics=compact -XX:ShenandoahUncommitDelay=30000 -XX:ShenandoahAllocationThreshold=15 -XX:ShenandoahGuaranteedGCInterval=30000 -XX:+PerfDisableSharedMem -XX:+DisableExplicitGC -XX:+ParallelRefProcEnabled -XX:ParallelGCThreads=4 -XX:ConcGCThreads=2 -Xms128M -Xmx{{MEMORY}}M -jar HytaleServer.jar $( [ \"{{HYTALE_ALLOW_OP}}\" = \"true\" ] || [ \"{{HYTALE_ALLOW_OP}}\" = \"1\" ] && echo \"--allow-op\" ) $( [ \"{{HYTALE_ACCEPT_EARLY_PLUGINS}}\" = \"true\" ] || [ \"{{HYTALE_ACCEPT_EARLY_PLUGINS}}\" = \"1\" ] && echo \"--accept-early-plugins\" ) $( [ \"{{DISABLE_SENTRY}}\" = \"true\" ] || [ \"{{DISABLE_SENTRY}}\" = \"1\" ] && echo \"--disable-sentry\" ) --auth-mode {{HYTALE_AUTH_MODE}} --assets ../Assets.zip --bind 0.0.0.0:{{PORT}} --backup --backup-dir backups --backup-frequency 30'",
  "stopCommand": "/stop",
  "sendSignalTo": "SIGTERM",
  "variables": [
    {
      "name": "MEMORY",
      "description": "Amount of RAM in MB to allocate to the server",
      "default": "4096",
      "required": true,
      "input": "number",
      "rules": [
        "between:512,65535"
      ]
    },
    {
      "name": "PORT",
      "description": "Server port (both container and host will use this port)",
      "default": "25565",
      "required": true,
      "input": "number",
      "rules": [
        "between:1024,65535"
      ]
    },
    {
      "name": "HYTALE_AUTH_MODE",
      "description": "Authentication mode.",
      "default": "authenticated",
      "required": true,
      "input": "select",
      "rules": [
        "in:authenticated,offline"
      ]
    },
    {
      "name": "HYTALE_PATCHLINE",
      "description": "The branch of Hytale to install.",
      "default": "release",
      "required": true,
      "input": "select",
      "rules": [
        "in:release,pre-release"
      ]
    },
    {
      "name": "USE_AOT_CACHE",
      "description": "Use the Ahead-of-Time cache to improve boot times.",
      "default": "true",
      "required": true,
      "input": "checkbox"
    },
    {
      "name": "HYTALE_ALLOW_OP",
      "description": "Allow operators.",
      "default": "false",
      "required": true,
      "input": "checkbox"
    },
    {
      "name": "HYTALE_ACCEPT_EARLY_PLUGINS",
      "description": "Allow early plugins (may be unstable).",
      "default": "false",
      "required": true,
      "input": "checkbox"
    },
    {
      "name": "DISABLE_SENTRY",
      "description": "Disable Sentry crash reporting during plugin development.",
      "default": "false",
      "required": true,
      "input": "checkbox"
    }
  ],
  "installScript": "#!/bin/sh\nset -e\n\n\necho '[Aero] Starting Hytale server installation...'\n\nmkdir -p {{SERVER_DIR}}\ncd {{SERVER_DIR}}\n\nif command -v apk >/dev/null 2>&1; then\n  apk add --no-cache curl unzip\nfi\n\nDOWNLOAD_URL=\"https://downloader.hytale.com/hytale-downloader.zip\"\n\necho '[Aero] Downloading Hytale Downloader CLI...'\nrm -f hytale-downloader.zip\nif command -v curl >/dev/null 2>&1; then\n  curl -fsSL -o hytale-downloader.zip \"$DOWNLOAD_URL\"\nelif command -v wget >/dev/null 2>&1; then\n  wget -q -O hytale-downloader.zip \"$DOWNLOAD_URL\"\nelse\n  echo '[Aero] ERROR: curl or wget is required'\n  exit 1\nfi\n\nunzip -o hytale-downloader.zip -d hytale-downloader\nmv hytale-downloader/hytale-downloader-linux-amd64 hytale-downloader/hytale-downloader-linux\nchmod 555 hytale-downloader/hytale-downloader-linux\n\necho \"[Aero] Hytale Downloader version: $(./hytale-downloader/hytale-downloader-linux -version)\"\n\necho '[Aero] Downloading server files...'\nPATCHLINE=\"{{HYTALE_PATCHLINE}}\"\nSERVER_ZIP=\"{{SERVER_DIR}}/hytale-server.zip\"\n./hytale-downloader/hytale-downloader-linux -patchline \"$PATCHLINE\" -download-path \"$SERVER_ZIP\"\n\nunzip -o \"$SERVER_ZIP\" -d \"{{SERVER_DIR}}\"\n\nrm -f \"$SERVER_ZIP\"\n\nmkdir -p \"{{SERVER_DIR}}/logs\"\nchown -R 1001:1001 \"{{SERVER_DIR}}\" || true\nchmod -R 777 \"{{SERVER_DIR}}\" || true\n\n\necho '[Aero] Installation complete!'\n",
  "supportedPorts": [
    25565
  ],
  "allocatedMemoryMb": 4096,
  "allocatedCpuCores": 2,
  "features": {
    "restartOnExit": true,
    "maxInstances": 25
  }
}
